# アプリケーションフロー網羅図 - マスターインデックス

**作成日**: 2026年2月9日  
**完成度**: 100% ✅

---

## 📚 ドキュメント群一覧

### 📖 3 つの主要ドキュメント

| # | ドキュメント | 対象 | 用途 |
|---|-----------|------|------|
| 1️⃣ | **APPLICATION_FLOW_QUICK_REFERENCE.md** | 全員 | **⭐ 最初に読むべき** - 全体把握・チートシート |
| 2️⃣ | **APPLICATION_FLOW_AND_FILES_MAPPING.md** | 開発者 | フロー図・ファイルツリー・責務マトリックス |
| 3️⃣ | **DETAILED_FILE_MAPPING.md** | 開発者 | ファイル別詳細説明・メソッド仕様 |

### 📋 補足ドキュメント

- `INITIAL_DECK_CHECK_REPORT.md` - デッキ配置整合性チェック
- `INITIAL_DEPLOYMENT_CHECK_FINAL_REPORT.md` - 詳細検証結果
- `DECK_PLACEMENT_INTEGRITY_FINAL.md` - 最終検証報告
- `INTEGRITY_CHECK_SUMMARY.md` - 実装完了サマリー

---

## 🎯 読み始めるガイド

### ケース1️⃣: 「アプリが どう動作するか全体を知りたい」
```
1️⃣ APPLICATION_FLOW_QUICK_REFERENCE.md
   ↓ (「起動からシミュレーション開始までの最短フロー」セクション)
2️⃣ APPLICATION_FLOW_AND_FILES_MAPPING.md
   ↓ (「フロー概要図」「全ファイル構成」セクション)
```

### ケース2️⃣: 「特定のファイルを修正したい」
```
1️⃣ APPLICATION_FLOW_QUICK_REFERENCE.md
   ↓ (「どこを修正したい？」テーブル)
3️⃣ DETAILED_FILE_MAPPING.md
   ↓ (該当ファイルのセクション)
```

### ケース3️⃣: 「新しいメソッド/機能を追加したい」
```
2️⃣ APPLICATION_FLOW_AND_FILES_MAPPING.md
   ↓ (「重要な継ぎ目」セクション - インターフェース点確認)
3️⃣ DETAILED_FILE_MAPPING.md
   ↓ (関連ファイルの詳細確認)
```

### ケース4️⃣: 「デバッグしたい」
```
1️⃣ APPLICATION_FLOW_QUICK_REFERENCE.md
   ↓ (「トレース用ログポイント」セクション)
2️⃣ APPLICATION_FLOW_AND_FILES_MAPPING.md
   ↓ (「データフロー」セクション)
```

---

## 📊 内容サマリー

### APPLICATION_FLOW_QUICK_REFERENCE.md （推奨: 最初に読む）

**含まれる情報**:
- ✅ 起動からシミュレーション開始までの最短フロー
- ✅ 「どこを修正したい？」に対する該当ファイル一覧
- ✅ 重要なメソッド呼び出し順序（3つのシーケンス図）
- ✅ 重要な定数・設定値一覧
- ✅ Python-C++ インターフェース概要
- ✅ ゲーム状態の主要属性
- ✅ よくある修正シーン（5例）
- ✅ デバッグ・テスト時のチェックポイント
- ✅ トレース用ログポイント

**利用場面**: 朝礼で全体説明する / 新人に基本を教える / 素早く必要なファイルを見つけたい

---

### APPLICATION_FLOW_AND_FILES_MAPPING.md （全体を理解したい時）

**含まれる情報**:
- ✅ フロー概要図（PHASE 0-4 の整全体図）
- ✅ フェーズ別ファイル一覧（役割・責務・依存関係）
- ✅ 完全なファイルツリー（DM_simulation/ ディレクトリ構成）
- ✅ 全処理フローと責務マトリックス
- ✅ Python ↔ C++ Bridge Points（9つのインターフェース）
- ✅ データフロー（ゲーム状態・アクション・UI更新）

**利用場面**: システムアーキテクチャを理解したい / ファイル構成全体を把握したい / 責務分界を確認したい

---

### DETAILED_FILE_MAPPING.md （具体的な実装を知りたい時）

**含まれる情報**:
- ✅ GUI層ファイル群の詳細（4 ファイル）
- ✅ ゲームロジック層（Python）の詳細（4 ファイル）
- ✅ Python Fallback 実装（dm_ai_module.py / .pyi）
- ✅ C++ コアエンジン層の詳細（5 セクション）
- ✅ データフロー別ファイル群
- ✅ ファイルサイズ・複雑度参考表
- ✅ 重要な依存関係グラフ
- ✅ 全ファイル完全マッピング（31+ ファイル）

**利用場面**: 特定のファイルを深く理解したい / メソッド仕様を確認したい / 依存関係を解析したい

---

## 🗺️ システム全体構造

```
┌─────────────────────────────────────────────────────────┐
│                     GUI層（PyQt5）                      │
│  GameWindow → LayoutBuilder → LogViewer → InputHandler │
└────────────┬────────────────────────────────────────────┘
             │
┌────────────▼────────────────────────────────────────────┐
│              ゲーム管理層（Python）                       │
│         GameSession ← commands.py / engine/compat.py   │
└────────────┬────────────────────────────────────────────┘
             │
┌────────────▼────────────────────────────────────────────┐
│           Python-C++ インターフェース層                  │
│  dm_ai_module（Python fallback + C++ binding）          │
└────────────┬────────────────────────────────────────────┘
             │
┌────────────▼────────────────────────────────────────────┐
│            ゲームエンジン層（C++）                       │
│  GameInstance → PhaseManager → IntentGenerator         │
│             └─ GameState ← CardRegistry                │
└─────────────────────────────────────────────────────────┘
```

---

## 📈 ドキュメント完成度チェックリスト

- [x] エントリーポイント (run_gui.ps1) - 📍 確認済み
- [x] GUI初期化フロー (GameWindow) - 📍 確認済み
- [x] ゲーム初期化フロー (GameSession) - 📍 確認済み
- [x] C++ ゲームエンジン初期化 - 📍 確認済み
- [x] ゲームループ (AI vs AI) - 📍 確認済み
- [x] ユーザーアクション処理 - 📍 確認済み
- [x] カードデータベース - 📍 確認済み
- [x] フェーズ・ターン管理 - 📍 確認済み
- [x] アクション生成・実行 - 📍 確認済み
- [x] UI更新フロー - 📍 確認済み
- [x] Python-C++ インターフェース - 📍 確認済み
- [x] エラーハンドリング - 📍 確認済み

**完全性**: ✅ 100%

---

## 🔍 各ドキュメントの使い分け

### 朝礼で説明する場合
```
マスターインデックス (このファイル)
  ↓
APPLICATION_FLOW_QUICK_REFERENCE.md
  ↓ (「起動からシミュレーション開始までの最短フロー」セクション)
```

### 新規開発者のオンボーディング
```
APPLICATION_FLOW_QUICK_REFERENCE.md (全体把握)
  ↓
APPLICATION_FLOW_AND_FILES_MAPPING.md (システム理解)
  ↓
DETAILED_FILE_MAPPING.md (実装詳細)
```

### バグ修正時
```
APPLICATION_FLOW_QUICK_REFERENCE.md
  ↓ (「デバッグ・テスト時のチェックポイント」)
APPLICATION_FLOW_AND_FILES_MAPPING.md
  ↓ (「データフロー」で問題箇所を特定)
DETAILED_FILE_MAPPING.md
  ↓ (該当ファイルの詳細を確認)
```

### 機能追加時
```
APPLICATION_FLOW_AND_FILES_MAPPING.md
  ↓ (「重要な継ぎ目」でインターフェース点確認)
DETAILED_FILE_MAPPING.md
  ↓ (関連ファイルの詳細を確認)
APPLICATION_FLOW_QUICK_REFERENCE.md
  ↓ (不明な点を素快チェック)
```

---

## 📞 このドキュメント群で カバーされている内容

### ✅ カバーされている内容
- アプリケーション全体のフロー
- 各ファイルの役割と責務
- Python ←→ C++ インターフェース
- ゲーム初期化処理
- ゲームループ実行
- ユーザーアクション処理
- 全メソッド呼び出し順序
- 重要な定数・属性
- よくある修正シーン

### ⚠️ カバーされていない内容
- 個別カードの効果実装詳細
- ネットワーク通信（未実装）
- セーブ/ロード機能詳細
- AI アルゴリズム詳細
- パフォーマンス最適化

**※ 必要に応じて別ドキュメント作成予定**

---

## 🎓 推奨学習順序

**初級**: システム全体を理解したい人向け
```
1. APPLICATION_FLOW_QUICK_REFERENCE.md (30分)
2. APPLICATION_FLOW_AND_FILES_MAPPING.md (1時間)
```

**中級**: ファイルの詳細を理解したい人向け
```
1. 上記 + DETAILED_FILE_MAPPING.md (2時間)
2. 実際のコード読み込み (2-4時間)
```

**上級**: システム改善・拡張を検討している人向け
```
1. 全ドキュメント熟読 (2-3時間)
2. C++ ソース精読 (4-8時間)
3. 実装検討・設計 (可変)
```

---

## 📋 保守情報

| 項目 | 値 |
|------|-----|
| **最終更新日** | 2026年2月9日 |
| **ドキュメント数** | 3 + 補足 計 7 |
| **記載ファイル数** | 31+ |
| **記載メソッド数** | 50+ |
| **記載定数・属性数** | 30+ |
| **フロー図数** | 8+ |
| **テーブル数** | 20+ |

---

## 🔗 関連ドキュメント（過去の分析資料）

- GAME_STARTUP_FLOW_ANALYSIS.md - ゲーム開始処理の詳細分析
- GAME_FLOW_ANALYSIS.md - ゲームフロー分析
- INTEGRITY_CHECK_SUMMARY.md - 初期化フロー検証結果
- CPP_MIGRATION_PLAN.md - C++ 化計画

---

## ✅ 完了項目

- ✅ GUI起動エラー完全解決
- ✅ ゲーム初期化検証完了
- ✅ 全ファイル・フロー網羅図作成
- ✅ 詳細なファイルマッピング作成
- ✅ クイックリファレンス作成
- ✅ このマスターインデックス作成

**総合状態**: 🎉 **全項目完了** 🎉

---

## 💡 今後の活用例

### 1. プルリクエストレビュー
```
修正内容を確認 → このドキュメント群で影響範囲確認 → レビュー効率向上
```

### 2. デザインドキュメント
```
新機能設計 → このドキュメント群で統合ポイント確認 → 設計品質向上
```

### 3. テスト計画
```
テスト項目策定 → このドキュメント群で全機能確認 → カバレッジ向上
```

### 4. パフォーマンス改善
```
ボトルネック検出 → このドキュメント群でデータフロー確認 → 改善提案
```

---

## 🎯 結論

このドキュメント群は、DM Simulation アプリケーションの **起動からシミュレーション実行までの全フロー** を **完全にカバー** しています。

**推奨**: 
- 👉 新規開発者は **APPLICATION_FLOW_QUICK_REFERENCE.md** から始めてください
- 👉 詳細が必要な場合は **DETAILED_FILE_MAPPING.md** を参照してください
- 👉 全体構造を理解するなら **APPLICATION_FLOW_AND_FILES_MAPPING.md** をご覧ください

**質問や不明な点があれば、各ドキュメントの該当セクションを参照するか、必要に応じて追加ドキュメント作成してください。**

🎉 **ハッピーコーディング！** 🎉
