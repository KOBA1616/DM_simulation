# Status and Requirements Summary (要件定義書 00)

このドキュメントはプロジェクトの現在のステータス、および今後の開発方針を定義するマスタードキュメントです。
以前の「AIの自己進化（成長）」や「カード資産の大量実装」に関する要件は破棄され、**エンジンの安定性、エディタの完成度、および特定のシナリオ解決能力** に焦点を絞った開発計画に更新されました。

## 1. 概要 (Overview)

Duel Masters AI Simulatorは、C++による高速なイベント駆動型ゲームエンジンと、それを操作・検証するための高機能なGUIエディタを提供するシステムです。

現在の主な目的は以下の3点です：
1.  **エンジンの完全な安定化**: 新実装されたGameCommandアーキテクチャの信頼性を確立する。
2.  **エディタの実用化**: ユーザー（開発者）が複雑なカード効果やシナリオをストレスなく作成できる環境を完成させる。
3.  **静的AIの提供**: 学習による成長ではなく、固定されたヒューリスティックや探索アルゴリズム（Solver）による、特定状況下の最適解導出機能を提供する。

※ AIの強化学習サイクル（Self-Evolution）およびカードセットの網羅的実装は、本プロジェクトのスコープ外となりました。

## 2. 現行システムステータス (Current Status)

### 2.1 コアエンジン (C++ / `src/engine`)
*   **GameCommand アーキテクチャ**: イベント駆動型システムへの刷新が完了。全てのアクションは5つの基本命令 (TRANSITION, MUTATE, FLOW, QUERY, DECIDE) に分解されています。
*   **汎用コストシステム**: コスト軽減、文明支払い要件などの複雑なロジックが統合済み。
*   **アクション処理**: `IActionHandler` と命令パイプラインによるデータ駆動型の効果解決を実現。

### 2.2 カードエディタ & ツール (`dm_toolkit/gui`)
*   **Card Editor Ver 2.3**: 視覚的なロジック編集、テキスト自動生成、バリデーション（Logic Mask）を実装済み。
*   **Scenario Editor**: 盤面状態を定義し、AIに特定の問題を解かせるためのシナリオ作成ツール。

### 2.3 AI (`dm_toolkit/ai`)
*   **探索アルゴリズム**: MCTS（モンテカルロ木探索）およびBeam Searchを実装済み。これらは現在、学習済みモデルではなく、固定された評価関数（ヒューリスティック）を用いて動作します。
*   **Lethal Solver**: 詰み盤面を解析するための専用ソルバー。

---

## 3. 開発ロードマップ (Roadmap)

これからの開発は、新規機能の追加よりも「既存機能の検証・安定化」と「ユーザビリティの向上」を最優先します。

### 3.1 [Priority: High] エンジン安定化と検証 (Engine Stabilization)
刷新されたGameCommandアーキテクチャが、あらゆるエッジケースにおいて正しく動作することを保証します。

*   **Action/Flow 検証**: `GameCommand` 移行後の各アクション（特に `RESOLVE_BATTLE`, `SHIELD_TRIGGER` 等の割り込み処理）の挙動確認。
*   **Stress Testing**: ランダムアクション（Fuzzing）による長時間耐久テストを行い、クラッシュやメモリリークを排除する。
*   **特殊処理の確認**: 革命チェンジ、侵略、ハイパーエナジー等の複雑なメカニクスが新アーキテクチャ上で正しく機能するかの再検証。

### 3.2 [Priority: Medium] エディタ機能の完成 (Editor Polish)
エディタを「開発ツール」として完成させます。

*   **ユーザビリティ向上**:
    *   各フィールドへのツールチップ（Tooltips）の充実。
    *   変数リンク（Variable Linking）の可視化強化。
    *   エラー表示の親切化。
*   **シナリオエディタの統合**: カードエディタとシームレスに連携し、テストシナリオを素早く作成・実行できるワークフローの確立。

### 3.3 [Priority: Medium] 静的AI・ソルバーの整備 (Static AI & Solver)
「成長しないが、役に立つAI」を目指します。

*   **Lethal Solver の精度向上**:
    *   「攻撃可能なクリーチャー」「ブロッカー」「シールド・トリガー確率」を厳密に考慮した確実なリーサル計算。
*   **シナリオ攻略**:
    *   作成されたシナリオ（詰めデュエル等）に対して、MCTS/BeamSearchを用いて正解ルートを導出できるかの検証。

---

## 4. 廃止された要件とスコープ外事項 (Discarded Requirements)

以下の項目は、プロジェクトの要件から正式に除外されました。

*   **AIの自己進化 (AI Growth/Evolution)**: 強化学習（Reinforcement Learning）ループ、PBT、自己対戦によるメタゲーム適応などの「学習」プロセス。
*   **カード資産の大量実装 (Mass Card Implementation)**: 特定の拡張パック（DM-01等）の全カード実装。カードデータは、エンジンの機能テストやシナリオに必要な分のみを随時作成する運用とします。
*   **デッキ生成機能**: AIによる自動デッキ構築。

※ 完了した過去のタスク詳細は `docs/00_Overview/99_Completed_Tasks_Archive.md` を参照してください。
